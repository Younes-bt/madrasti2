# lessons/management/commands/create_lesson_1620_human_heredity.py

from django.core.management.base import BaseCommand
from lessons.models import Lesson
from homework.models import Exercise, Question, QuestionChoice
from users.models import User

class Command(BaseCommand):
    help = 'Create exercises for Lesson 1620: Human Heredity'

    def add_arguments(self, parser):
        parser.add_argument(
            '--delete-existing',
            action='store_true',
            help='Delete existing exercises for this lesson before creating new ones',
        )

    def handle(self, *args, **options):
        try:
            lesson = Lesson.objects.get(id=1620)
            self.stdout.write(f"Found lesson: {lesson.title}")

            if options['delete_existing']:
                deleted_count = Exercise.objects.filter(lesson=lesson).delete()[0]
                self.stdout.write(self.style.WARNING(f"Deleted {deleted_count} existing exercises"))

            admin_user = User.objects.filter(is_superuser=True).first()
            if not admin_user:
                self.stdout.write(self.style.ERROR("No admin user found"))
                return

            exercises_data = [{'title': 'Introduction to Human Heredity', 'title_ar': 'مقدمة في الوراثة البشرية', 'difficulty': 'beginner', 'points': 12, 'questions': [{'text': 'What is the main concept of Introduction to Human Heredity?', 'text_ar': 'ما هو المفهوم الأساسي لـ مقدمة في الوراثة البشرية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Introduction to Human Heredity', 'text_ar': 'المفهوم الأساسي لـ مقدمة في الوراثة البشرية', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Introduction to Human Heredity?', 'text_ar': 'أي عبارة صحيحة عن مقدمة في الوراثة البشرية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Introduction to Human Heredity?', 'text_ar': 'كيف تطبق مقدمة في الوراثة البشرية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Introduction to Human Heredity?', 'text_ar': 'أي خاصية تتعلق بـ مقدمة في الوراثة البشرية؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Introduction to Human Heredity correct?', 'text_ar': 'هل العبارة عن مقدمة في الوراثة البشرية صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Introduction to Human Heredity', 'text_ar': 'حل مسألة تتضمن مقدمة في الوراثة البشرية', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}, {'title': 'Chromosomes and Genes', 'title_ar': 'الكروموسومات والجينات', 'difficulty': 'beginner', 'points': 12, 'questions': [{'text': 'What is the main concept of Chromosomes and Genes?', 'text_ar': 'ما هو المفهوم الأساسي لـ الكروموسومات والجينات؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Chromosomes and Genes', 'text_ar': 'المفهوم الأساسي لـ الكروموسومات والجينات', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Chromosomes and Genes?', 'text_ar': 'أي عبارة صحيحة عن الكروموسومات والجينات؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Chromosomes and Genes?', 'text_ar': 'كيف تطبق الكروموسومات والجينات؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Chromosomes and Genes?', 'text_ar': 'أي خاصية تتعلق بـ الكروموسومات والجينات؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Chromosomes and Genes correct?', 'text_ar': 'هل العبارة عن الكروموسومات والجينات صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Chromosomes and Genes', 'text_ar': 'حل مسألة تتضمن الكروموسومات والجينات', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}, {'title': 'Inheritance Patterns', 'title_ar': 'أنماط الوراثة', 'difficulty': 'intermediate', 'points': 12, 'questions': [{'text': 'What is the main concept of Inheritance Patterns?', 'text_ar': 'ما هو المفهوم الأساسي لـ أنماط الوراثة؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Inheritance Patterns', 'text_ar': 'المفهوم الأساسي لـ أنماط الوراثة', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Inheritance Patterns?', 'text_ar': 'أي عبارة صحيحة عن أنماط الوراثة؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Inheritance Patterns?', 'text_ar': 'كيف تطبق أنماط الوراثة؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Inheritance Patterns?', 'text_ar': 'أي خاصية تتعلق بـ أنماط الوراثة؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Inheritance Patterns correct?', 'text_ar': 'هل العبارة عن أنماط الوراثة صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Inheritance Patterns', 'text_ar': 'حل مسألة تتضمن أنماط الوراثة', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}, {'title': 'Genetic Disorders', 'title_ar': 'الاضطرابات الوراثية', 'difficulty': 'intermediate', 'points': 12, 'questions': [{'text': 'What is the main concept of Genetic Disorders?', 'text_ar': 'ما هو المفهوم الأساسي لـ الاضطرابات الوراثية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Genetic Disorders', 'text_ar': 'المفهوم الأساسي لـ الاضطرابات الوراثية', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Genetic Disorders?', 'text_ar': 'أي عبارة صحيحة عن الاضطرابات الوراثية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Genetic Disorders?', 'text_ar': 'كيف تطبق الاضطرابات الوراثية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Genetic Disorders?', 'text_ar': 'أي خاصية تتعلق بـ الاضطرابات الوراثية؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Genetic Disorders correct?', 'text_ar': 'هل العبارة عن الاضطرابات الوراثية صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Genetic Disorders', 'text_ar': 'حل مسألة تتضمن الاضطرابات الوراثية', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}, {'title': 'Family Pedigrees', 'title_ar': 'شجرة النسب العائلية', 'difficulty': 'advanced', 'points': 12, 'questions': [{'text': 'What is the main concept of Family Pedigrees?', 'text_ar': 'ما هو المفهوم الأساسي لـ شجرة النسب العائلية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Family Pedigrees', 'text_ar': 'المفهوم الأساسي لـ شجرة النسب العائلية', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Family Pedigrees?', 'text_ar': 'أي عبارة صحيحة عن شجرة النسب العائلية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Family Pedigrees?', 'text_ar': 'كيف تطبق شجرة النسب العائلية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Family Pedigrees?', 'text_ar': 'أي خاصية تتعلق بـ شجرة النسب العائلية؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Family Pedigrees correct?', 'text_ar': 'هل العبارة عن شجرة النسب العائلية صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Family Pedigrees', 'text_ar': 'حل مسألة تتضمن شجرة النسب العائلية', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}]

            for exercise_data in exercises_data:
                exercise = Exercise.objects.create(
                    lesson=lesson,
                    title=exercise_data['title'],
                    title_arabic=exercise_data['title_ar'],
                    difficulty_level=exercise_data['difficulty'],
                    total_points=exercise_data['points'],
                    created_by=admin_user
                )

                for q_data in exercise_data['questions']:
                    question = Question.objects.create(
                        exercise=exercise,
                        question_text=q_data['text'],
                        question_text_arabic=q_data['text_ar'],
                        question_type=q_data['type'],
                        points=q_data['points']
                    )

                    for choice_data in q_data['choices']:
                        QuestionChoice.objects.create(
                            question=question,
                            choice_text=choice_data['text'],
                            choice_text_arabic=choice_data['text_ar'],
                            is_correct=choice_data['is_correct']
                        )

                self.stdout.write(f"Created exercise: {exercise.title}")

            self.stdout.write(self.style.SUCCESS(
                f"Successfully created {len(exercises_data)} exercises for lesson {lesson.id}"
            ))

        except Lesson.DoesNotExist:
            self.stdout.write(self.style.ERROR("Lesson 1620 not found"))
        except Exception as e:
            self.stdout.write(self.style.ERROR(f"Error: {str(e)}"))
