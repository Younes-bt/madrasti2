# lessons/management/commands/create_lesson_1208_triangle.py

from django.core.management.base import BaseCommand
from lessons.models import Lesson
from homework.models import Exercise, Question, QuestionChoice
from users.models import User

class Command(BaseCommand):
    help = 'Create exercises for Lesson 1208: Triangle'

    def add_arguments(self, parser):
        parser.add_argument(
            '--delete-existing',
            action='store_true',
            help='Delete existing exercises for this lesson before creating new ones',
        )

    def handle(self, *args, **options):
        try:
            lesson = Lesson.objects.get(id=1208)
            self.stdout.write(f"Found lesson: {lesson.title}")

            if options['delete_existing']:
                deleted_count = Exercise.objects.filter(lesson=lesson).delete()[0]
                self.stdout.write(self.style.WARNING(f"Deleted {deleted_count} existing exercises"))

            admin_user = User.objects.filter(is_superuser=True).first()
            if not admin_user:
                self.stdout.write(self.style.ERROR("No admin user found"))
                return

            exercises_data = [{'title': 'Introduction to Triangles', 'title_ar': 'مقدمة في المثلثات', 'difficulty': 'beginner', 'points': 12, 'questions': [{'text': 'What is the main concept of Introduction to Triangles?', 'text_ar': 'ما هو المفهوم الأساسي لـ مقدمة في المثلثات؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Introduction to Triangles', 'text_ar': 'المفهوم الأساسي لـ مقدمة في المثلثات', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Introduction to Triangles?', 'text_ar': 'أي عبارة صحيحة عن مقدمة في المثلثات؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Introduction to Triangles?', 'text_ar': 'كيف تطبق مقدمة في المثلثات؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Introduction to Triangles?', 'text_ar': 'أي خاصية تتعلق بـ مقدمة في المثلثات؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Introduction to Triangles correct?', 'text_ar': 'هل العبارة عن مقدمة في المثلثات صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Introduction to Triangles', 'text_ar': 'حل مسألة تتضمن مقدمة في المثلثات', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}, {'title': 'Types of Triangles', 'title_ar': 'أنواع المثلثات', 'difficulty': 'beginner', 'points': 12, 'questions': [{'text': 'What is the main concept of Types of Triangles?', 'text_ar': 'ما هو المفهوم الأساسي لـ أنواع المثلثات؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Types of Triangles', 'text_ar': 'المفهوم الأساسي لـ أنواع المثلثات', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Types of Triangles?', 'text_ar': 'أي عبارة صحيحة عن أنواع المثلثات؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Types of Triangles?', 'text_ar': 'كيف تطبق أنواع المثلثات؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Types of Triangles?', 'text_ar': 'أي خاصية تتعلق بـ أنواع المثلثات؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Types of Triangles correct?', 'text_ar': 'هل العبارة عن أنواع المثلثات صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Types of Triangles', 'text_ar': 'حل مسألة تتضمن أنواع المثلثات', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}, {'title': 'Properties of Triangles', 'title_ar': 'خصائص المثلثات', 'difficulty': 'intermediate', 'points': 12, 'questions': [{'text': 'What is the main concept of Properties of Triangles?', 'text_ar': 'ما هو المفهوم الأساسي لـ خصائص المثلثات؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Properties of Triangles', 'text_ar': 'المفهوم الأساسي لـ خصائص المثلثات', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Properties of Triangles?', 'text_ar': 'أي عبارة صحيحة عن خصائص المثلثات؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Properties of Triangles?', 'text_ar': 'كيف تطبق خصائص المثلثات؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Properties of Triangles?', 'text_ar': 'أي خاصية تتعلق بـ خصائص المثلثات؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Properties of Triangles correct?', 'text_ar': 'هل العبارة عن خصائص المثلثات صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Properties of Triangles', 'text_ar': 'حل مسألة تتضمن خصائص المثلثات', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}, {'title': 'Angle Sum in Triangles', 'title_ar': 'مجموع زوايا المثلث', 'difficulty': 'intermediate', 'points': 12, 'questions': [{'text': 'What is the main concept of Angle Sum in Triangles?', 'text_ar': 'ما هو المفهوم الأساسي لـ مجموع زوايا المثلث؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Angle Sum in Triangles', 'text_ar': 'المفهوم الأساسي لـ مجموع زوايا المثلث', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Angle Sum in Triangles?', 'text_ar': 'أي عبارة صحيحة عن مجموع زوايا المثلث؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Angle Sum in Triangles?', 'text_ar': 'كيف تطبق مجموع زوايا المثلث؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Angle Sum in Triangles?', 'text_ar': 'أي خاصية تتعلق بـ مجموع زوايا المثلث؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Angle Sum in Triangles correct?', 'text_ar': 'هل العبارة عن مجموع زوايا المثلث صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Angle Sum in Triangles', 'text_ar': 'حل مسألة تتضمن مجموع زوايا المثلث', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}, {'title': 'Construction of Triangles', 'title_ar': 'إنشاء المثلثات', 'difficulty': 'advanced', 'points': 12, 'questions': [{'text': 'What is the main concept of Construction of Triangles?', 'text_ar': 'ما هو المفهوم الأساسي لـ إنشاء المثلثات؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Construction of Triangles', 'text_ar': 'المفهوم الأساسي لـ إنشاء المثلثات', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Construction of Triangles?', 'text_ar': 'أي عبارة صحيحة عن إنشاء المثلثات؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Construction of Triangles?', 'text_ar': 'كيف تطبق إنشاء المثلثات؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Construction of Triangles?', 'text_ar': 'أي خاصية تتعلق بـ إنشاء المثلثات؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Construction of Triangles correct?', 'text_ar': 'هل العبارة عن إنشاء المثلثات صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Construction of Triangles', 'text_ar': 'حل مسألة تتضمن إنشاء المثلثات', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}]

            for exercise_data in exercises_data:
                exercise = Exercise.objects.create(
                    lesson=lesson,
                    title=exercise_data['title'],
                    title_arabic=exercise_data['title_ar'],
                    difficulty_level=exercise_data['difficulty'],
                    total_points=exercise_data['points'],
                    created_by=admin_user
                )

                for q_data in exercise_data['questions']:
                    question = Question.objects.create(
                        exercise=exercise,
                        question_text=q_data['text'],
                        question_text_arabic=q_data['text_ar'],
                        question_type=q_data['type'],
                        points=q_data['points']
                    )

                    for choice_data in q_data['choices']:
                        QuestionChoice.objects.create(
                            question=question,
                            choice_text=choice_data['text'],
                            choice_text_arabic=choice_data['text_ar'],
                            is_correct=choice_data['is_correct']
                        )

                self.stdout.write(f"Created exercise: {exercise.title}")

            self.stdout.write(self.style.SUCCESS(
                f"Successfully created {len(exercises_data)} exercises for lesson {lesson.id}"
            ))

        except Lesson.DoesNotExist:
            self.stdout.write(self.style.ERROR("Lesson 1208 not found"))
        except Exception as e:
            self.stdout.write(self.style.ERROR(f"Error: {str(e)}"))
