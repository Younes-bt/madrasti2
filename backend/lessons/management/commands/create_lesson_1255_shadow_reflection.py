"""
Django management command to create exercises for Lesson 1255: Shadow and Reflection
Generated by: generate_batch24_physics.py
"""

from django.core.management.base import BaseCommand
from lessons.models import Lesson
from homework.models import Exercise, Question, QuestionChoice
from users.models import User


class Command(BaseCommand):
    help = 'Create exercises for Lesson 1255: Shadow and Reflection'

    def handle(self, *args, **options):
        try:
            lesson = Lesson.objects.get(id=1255)
        except Lesson.DoesNotExist:
            self.stdout.write(self.style.ERROR(f'Lesson 1255 not found'))
            return

        admin_user = User.objects.filter(is_superuser=True).first()
        if not admin_user:
            self.stdout.write(self.style.ERROR('No admin user found'))
            return

        exercises_data = [{'title': 'Formation of Shadows', 'title_ar': 'تكوين الظلال', 'difficulty': 'beginner', 'points': 12, 'questions': [{'text': 'Formation of Shadows - Question 1', 'text_ar': 'تكوين الظلال - السؤال 1', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Formation of Shadows - Question 2', 'text_ar': 'تكوين الظلال - السؤال 2', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Formation of Shadows - Question 3', 'text_ar': 'تكوين الظلال - السؤال 3', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Formation of Shadows - Question 4', 'text_ar': 'تكوين الظلال - السؤال 4', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Formation of Shadows - Question 5', 'text_ar': 'تكوين الظلال - السؤال 5', 'question_type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Formation of Shadows - Question 6', 'text_ar': 'تكوين الظلال - السؤال 6', 'question_type': 'true_false', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}]}, {'title': 'Types of Shadows', 'title_ar': 'أنواع الظلال', 'difficulty': 'beginner', 'points': 12, 'questions': [{'text': 'Types of Shadows - Question 1', 'text_ar': 'أنواع الظلال - السؤال 1', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Types of Shadows - Question 2', 'text_ar': 'أنواع الظلال - السؤال 2', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Types of Shadows - Question 3', 'text_ar': 'أنواع الظلال - السؤال 3', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Types of Shadows - Question 4', 'text_ar': 'أنواع الظلال - السؤال 4', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Types of Shadows - Question 5', 'text_ar': 'أنواع الظلال - السؤال 5', 'question_type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Types of Shadows - Question 6', 'text_ar': 'أنواع الظلال - السؤال 6', 'question_type': 'true_false', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}]}, {'title': 'Law of Reflection', 'title_ar': 'قانون الانعكاس', 'difficulty': 'intermediate', 'points': 12, 'questions': [{'text': 'Law of Reflection - Question 1', 'text_ar': 'قانون الانعكاس - السؤال 1', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Law of Reflection - Question 2', 'text_ar': 'قانون الانعكاس - السؤال 2', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Law of Reflection - Question 3', 'text_ar': 'قانون الانعكاس - السؤال 3', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Law of Reflection - Question 4', 'text_ar': 'قانون الانعكاس - السؤال 4', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Law of Reflection - Question 5', 'text_ar': 'قانون الانعكاس - السؤال 5', 'question_type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Law of Reflection - Question 6', 'text_ar': 'قانون الانعكاس - السؤال 6', 'question_type': 'true_false', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}]}, {'title': 'Plane Mirrors', 'title_ar': 'المرايا المستوية', 'difficulty': 'intermediate', 'points': 12, 'questions': [{'text': 'Plane Mirrors - Question 1', 'text_ar': 'المرايا المستوية - السؤال 1', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Plane Mirrors - Question 2', 'text_ar': 'المرايا المستوية - السؤال 2', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Plane Mirrors - Question 3', 'text_ar': 'المرايا المستوية - السؤال 3', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Plane Mirrors - Question 4', 'text_ar': 'المرايا المستوية - السؤال 4', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Plane Mirrors - Question 5', 'text_ar': 'المرايا المستوية - السؤال 5', 'question_type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Plane Mirrors - Question 6', 'text_ar': 'المرايا المستوية - السؤال 6', 'question_type': 'true_false', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}]}, {'title': 'Applications of Reflection', 'title_ar': 'تطبيقات الانعكاس', 'difficulty': 'advanced', 'points': 12, 'questions': [{'text': 'Applications of Reflection - Question 1', 'text_ar': 'تطبيقات الانعكاس - السؤال 1', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Applications of Reflection - Question 2', 'text_ar': 'تطبيقات الانعكاس - السؤال 2', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Applications of Reflection - Question 3', 'text_ar': 'تطبيقات الانعكاس - السؤال 3', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Applications of Reflection - Question 4', 'text_ar': 'تطبيقات الانعكاس - السؤال 4', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Applications of Reflection - Question 5', 'text_ar': 'تطبيقات الانعكاس - السؤال 5', 'question_type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Applications of Reflection - Question 6', 'text_ar': 'تطبيقات الانعكاس - السؤال 6', 'question_type': 'true_false', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}]}]

        created_count = 0
        for exercise_data in exercises_data:
            # Check if exercise already exists
            if Exercise.objects.filter(
                lesson=lesson,
                title=exercise_data['title']
            ).exists():
                self.stdout.write(
                    self.style.WARNING(
                        f'Exercise "{exercise_data["title"]}" already exists, skipping...'
                    )
                )
                continue

            # Create exercise
            exercise = Exercise.objects.create(
                lesson=lesson,
                title=exercise_data['title'],
                title_arabic=exercise_data['title_ar'],
                difficulty_level=exercise_data['difficulty'],
                total_points=exercise_data['points'],
                created_by=admin_user
            )

            # Create questions for this exercise
            for q_data in exercise_data['questions']:
                question = Question.objects.create(
                    exercise=exercise,
                    question_text=q_data['text'],
                    question_text_arabic=q_data['text_ar'],
                    question_type=q_data['question_type'],
                    points=q_data['points']
                )

                # Create choices for this question
                for choice_data in q_data['choices']:
                    QuestionChoice.objects.create(
                        question=question,
                        choice_text=choice_data['text'],
                        choice_text_arabic=choice_data['text_ar'],
                        is_correct=choice_data['is_correct']
                    )

            created_count += 1
            self.stdout.write(
                self.style.SUCCESS(
                    f'Created exercise: {exercise.title} with {len(exercise_data["questions"])} questions'
                )
            )

        self.stdout.write(
            self.style.SUCCESS(
                f'Successfully created {created_count} exercises for lesson: Shadow and Reflection'
            )
        )
