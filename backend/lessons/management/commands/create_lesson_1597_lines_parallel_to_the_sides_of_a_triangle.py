# lessons/management/commands/create_lesson_1597_lines_parallel_to_the_sides_of_a_triangle.py

from django.core.management.base import BaseCommand
from lessons.models import Lesson
from homework.models import Exercise, Question, QuestionChoice
from users.models import User

class Command(BaseCommand):
    help = 'Create exercises for Lesson 1597: Lines Parallel to the Sides of a Triangle'

    def add_arguments(self, parser):
        parser.add_argument(
            '--delete-existing',
            action='store_true',
            help='Delete existing exercises for this lesson before creating new ones',
        )

    def handle(self, *args, **options):
        try:
            lesson = Lesson.objects.get(id=1597)
            self.stdout.write(f"Found lesson: {lesson.title}")

            if options['delete_existing']:
                deleted_count = Exercise.objects.filter(lesson=lesson).delete()[0]
                self.stdout.write(self.style.WARNING(f"Deleted {deleted_count} existing exercises"))

            admin_user = User.objects.filter(is_superuser=True).first()
            if not admin_user:
                self.stdout.write(self.style.ERROR("No admin user found"))
                return

            exercises_data = [{'title': 'Parallel Lines in Triangles', 'title_ar': 'المستقيمات الموازية في المثلثات', 'difficulty': 'beginner', 'points': 12, 'questions': [{'text': 'What is the main concept of Parallel Lines in Triangles?', 'text_ar': 'ما هو المفهوم الأساسي لـ المستقيمات الموازية في المثلثات؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Parallel Lines in Triangles', 'text_ar': 'المفهوم الأساسي لـ المستقيمات الموازية في المثلثات', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Parallel Lines in Triangles?', 'text_ar': 'أي عبارة صحيحة عن المستقيمات الموازية في المثلثات؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Parallel Lines in Triangles?', 'text_ar': 'كيف تطبق المستقيمات الموازية في المثلثات؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Parallel Lines in Triangles?', 'text_ar': 'أي خاصية تتعلق بـ المستقيمات الموازية في المثلثات؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Parallel Lines in Triangles correct?', 'text_ar': 'هل العبارة عن المستقيمات الموازية في المثلثات صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Parallel Lines in Triangles', 'text_ar': 'حل مسألة تتضمن المستقيمات الموازية في المثلثات', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}, {'title': 'Proportional Segments', 'title_ar': 'القطع المتناسبة', 'difficulty': 'beginner', 'points': 12, 'questions': [{'text': 'What is the main concept of Proportional Segments?', 'text_ar': 'ما هو المفهوم الأساسي لـ القطع المتناسبة؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Proportional Segments', 'text_ar': 'المفهوم الأساسي لـ القطع المتناسبة', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Proportional Segments?', 'text_ar': 'أي عبارة صحيحة عن القطع المتناسبة؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Proportional Segments?', 'text_ar': 'كيف تطبق القطع المتناسبة؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Proportional Segments?', 'text_ar': 'أي خاصية تتعلق بـ القطع المتناسبة؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Proportional Segments correct?', 'text_ar': 'هل العبارة عن القطع المتناسبة صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Proportional Segments', 'text_ar': 'حل مسألة تتضمن القطع المتناسبة', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}, {'title': 'Thales Theorem', 'title_ar': 'مبرهنة طاليس', 'difficulty': 'intermediate', 'points': 12, 'questions': [{'text': 'What is the main concept of Thales Theorem?', 'text_ar': 'ما هو المفهوم الأساسي لـ مبرهنة طاليس؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Thales Theorem', 'text_ar': 'المفهوم الأساسي لـ مبرهنة طاليس', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Thales Theorem?', 'text_ar': 'أي عبارة صحيحة عن مبرهنة طاليس؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Thales Theorem?', 'text_ar': 'كيف تطبق مبرهنة طاليس؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Thales Theorem?', 'text_ar': 'أي خاصية تتعلق بـ مبرهنة طاليس؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Thales Theorem correct?', 'text_ar': 'هل العبارة عن مبرهنة طاليس صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Thales Theorem', 'text_ar': 'حل مسألة تتضمن مبرهنة طاليس', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}, {'title': 'Applications of Parallel Lines', 'title_ar': 'تطبيقات المستقيمات الموازية', 'difficulty': 'intermediate', 'points': 12, 'questions': [{'text': 'What is the main concept of Applications of Parallel Lines?', 'text_ar': 'ما هو المفهوم الأساسي لـ تطبيقات المستقيمات الموازية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Applications of Parallel Lines', 'text_ar': 'المفهوم الأساسي لـ تطبيقات المستقيمات الموازية', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Applications of Parallel Lines?', 'text_ar': 'أي عبارة صحيحة عن تطبيقات المستقيمات الموازية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Applications of Parallel Lines?', 'text_ar': 'كيف تطبق تطبيقات المستقيمات الموازية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Applications of Parallel Lines?', 'text_ar': 'أي خاصية تتعلق بـ تطبيقات المستقيمات الموازية؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Applications of Parallel Lines correct?', 'text_ar': 'هل العبارة عن تطبيقات المستقيمات الموازية صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Applications of Parallel Lines', 'text_ar': 'حل مسألة تتضمن تطبيقات المستقيمات الموازية', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}, {'title': 'Problem Solving', 'title_ar': 'حل المسائل', 'difficulty': 'advanced', 'points': 12, 'questions': [{'text': 'What is the main concept of Problem Solving?', 'text_ar': 'ما هو المفهوم الأساسي لـ حل المسائل؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Problem Solving', 'text_ar': 'المفهوم الأساسي لـ حل المسائل', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Problem Solving?', 'text_ar': 'أي عبارة صحيحة عن حل المسائل؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Problem Solving?', 'text_ar': 'كيف تطبق حل المسائل؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Problem Solving?', 'text_ar': 'أي خاصية تتعلق بـ حل المسائل؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Problem Solving correct?', 'text_ar': 'هل العبارة عن حل المسائل صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Problem Solving', 'text_ar': 'حل مسألة تتضمن حل المسائل', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}]

            for exercise_data in exercises_data:
                exercise = Exercise.objects.create(
                    lesson=lesson,
                    title=exercise_data['title'],
                    title_arabic=exercise_data['title_ar'],
                    difficulty_level=exercise_data['difficulty'],
                    total_points=exercise_data['points'],
                    created_by=admin_user
                )

                for q_data in exercise_data['questions']:
                    question = Question.objects.create(
                        exercise=exercise,
                        question_text=q_data['text'],
                        question_text_arabic=q_data['text_ar'],
                        question_type=q_data['type'],
                        points=q_data['points']
                    )

                    for choice_data in q_data['choices']:
                        QuestionChoice.objects.create(
                            question=question,
                            choice_text=choice_data['text'],
                            choice_text_arabic=choice_data['text_ar'],
                            is_correct=choice_data['is_correct']
                        )

                self.stdout.write(f"Created exercise: {exercise.title}")

            self.stdout.write(self.style.SUCCESS(
                f"Successfully created {len(exercises_data)} exercises for lesson {lesson.id}"
            ))

        except Lesson.DoesNotExist:
            self.stdout.write(self.style.ERROR("Lesson 1597 not found"))
        except Exception as e:
            self.stdout.write(self.style.ERROR(f"Error: {str(e)}"))
