# lessons/management/commands/create_lesson_1579_light_sources_and_receivers.py

from django.core.management.base import BaseCommand
from lessons.models import Lesson
from homework.models import Exercise, Question, QuestionChoice
from users.models import User

class Command(BaseCommand):
    help = 'Create exercises for Lesson 1579: Light Sources and Receivers'

    def add_arguments(self, parser):
        parser.add_argument(
            '--delete-existing',
            action='store_true',
            help='Delete existing exercises for this lesson before creating new ones',
        )

    def handle(self, *args, **options):
        try:
            lesson = Lesson.objects.get(id=1579)
            self.stdout.write(f"Found lesson: {lesson.title}")

            if options['delete_existing']:
                deleted_count = Exercise.objects.filter(lesson=lesson).delete()[0]
                self.stdout.write(self.style.WARNING(f"Deleted {deleted_count} existing exercises"))

            admin_user = User.objects.filter(is_superuser=True).first()
            if not admin_user:
                self.stdout.write(self.style.ERROR("No admin user found"))
                return

            exercises_data = [{'title': 'Natural Light Sources', 'title_ar': 'مصادر الضوء الطبيعية', 'difficulty': 'beginner', 'points': 12, 'questions': [{'text': 'What is the main concept of Natural Light Sources?', 'text_ar': 'ما هو المفهوم الأساسي لـ مصادر الضوء الطبيعية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Natural Light Sources', 'text_ar': 'المفهوم الأساسي لـ مصادر الضوء الطبيعية', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Natural Light Sources?', 'text_ar': 'أي عبارة صحيحة عن مصادر الضوء الطبيعية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Natural Light Sources?', 'text_ar': 'كيف تطبق مصادر الضوء الطبيعية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Natural Light Sources?', 'text_ar': 'أي خاصية تتعلق بـ مصادر الضوء الطبيعية؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Natural Light Sources correct?', 'text_ar': 'هل العبارة عن مصادر الضوء الطبيعية صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Natural Light Sources', 'text_ar': 'حل مسألة تتضمن مصادر الضوء الطبيعية', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}, {'title': 'Artificial Light Sources', 'title_ar': 'مصادر الضوء الاصطناعية', 'difficulty': 'beginner', 'points': 12, 'questions': [{'text': 'What is the main concept of Artificial Light Sources?', 'text_ar': 'ما هو المفهوم الأساسي لـ مصادر الضوء الاصطناعية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Artificial Light Sources', 'text_ar': 'المفهوم الأساسي لـ مصادر الضوء الاصطناعية', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Artificial Light Sources?', 'text_ar': 'أي عبارة صحيحة عن مصادر الضوء الاصطناعية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Artificial Light Sources?', 'text_ar': 'كيف تطبق مصادر الضوء الاصطناعية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Artificial Light Sources?', 'text_ar': 'أي خاصية تتعلق بـ مصادر الضوء الاصطناعية؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Artificial Light Sources correct?', 'text_ar': 'هل العبارة عن مصادر الضوء الاصطناعية صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Artificial Light Sources', 'text_ar': 'حل مسألة تتضمن مصادر الضوء الاصطناعية', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}, {'title': 'Luminous and Non-Luminous Objects', 'title_ar': 'الأجسام المضيئة وغير المضيئة', 'difficulty': 'intermediate', 'points': 12, 'questions': [{'text': 'What is the main concept of Luminous and Non-Luminous Objects?', 'text_ar': 'ما هو المفهوم الأساسي لـ الأجسام المضيئة وغير المضيئة؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Luminous and Non-Luminous Objects', 'text_ar': 'المفهوم الأساسي لـ الأجسام المضيئة وغير المضيئة', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Luminous and Non-Luminous Objects?', 'text_ar': 'أي عبارة صحيحة عن الأجسام المضيئة وغير المضيئة؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Luminous and Non-Luminous Objects?', 'text_ar': 'كيف تطبق الأجسام المضيئة وغير المضيئة؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Luminous and Non-Luminous Objects?', 'text_ar': 'أي خاصية تتعلق بـ الأجسام المضيئة وغير المضيئة؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Luminous and Non-Luminous Objects correct?', 'text_ar': 'هل العبارة عن الأجسام المضيئة وغير المضيئة صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Luminous and Non-Luminous Objects', 'text_ar': 'حل مسألة تتضمن الأجسام المضيئة وغير المضيئة', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}, {'title': 'Light Receivers and Vision', 'title_ar': 'مستقبلات الضوء والرؤية', 'difficulty': 'intermediate', 'points': 12, 'questions': [{'text': 'What is the main concept of Light Receivers and Vision?', 'text_ar': 'ما هو المفهوم الأساسي لـ مستقبلات الضوء والرؤية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Light Receivers and Vision', 'text_ar': 'المفهوم الأساسي لـ مستقبلات الضوء والرؤية', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Light Receivers and Vision?', 'text_ar': 'أي عبارة صحيحة عن مستقبلات الضوء والرؤية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Light Receivers and Vision?', 'text_ar': 'كيف تطبق مستقبلات الضوء والرؤية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Light Receivers and Vision?', 'text_ar': 'أي خاصية تتعلق بـ مستقبلات الضوء والرؤية؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Light Receivers and Vision correct?', 'text_ar': 'هل العبارة عن مستقبلات الضوء والرؤية صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Light Receivers and Vision', 'text_ar': 'حل مسألة تتضمن مستقبلات الضوء والرؤية', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}, {'title': 'Applications of Light Sources', 'title_ar': 'تطبيقات مصادر الضوء', 'difficulty': 'advanced', 'points': 12, 'questions': [{'text': 'What is the main concept of Applications of Light Sources?', 'text_ar': 'ما هو المفهوم الأساسي لـ تطبيقات مصادر الضوء؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Applications of Light Sources', 'text_ar': 'المفهوم الأساسي لـ تطبيقات مصادر الضوء', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Applications of Light Sources?', 'text_ar': 'أي عبارة صحيحة عن تطبيقات مصادر الضوء؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Applications of Light Sources?', 'text_ar': 'كيف تطبق تطبيقات مصادر الضوء؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Applications of Light Sources?', 'text_ar': 'أي خاصية تتعلق بـ تطبيقات مصادر الضوء؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Applications of Light Sources correct?', 'text_ar': 'هل العبارة عن تطبيقات مصادر الضوء صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Applications of Light Sources', 'text_ar': 'حل مسألة تتضمن تطبيقات مصادر الضوء', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}]

            for exercise_data in exercises_data:
                exercise = Exercise.objects.create(
                    lesson=lesson,
                    title=exercise_data['title'],
                    title_arabic=exercise_data['title_ar'],
                    difficulty_level=exercise_data['difficulty'],
                    total_points=exercise_data['points'],
                    created_by=admin_user
                )

                for q_data in exercise_data['questions']:
                    question = Question.objects.create(
                        exercise=exercise,
                        question_text=q_data['text'],
                        question_text_arabic=q_data['text_ar'],
                        question_type=q_data['type'],
                        points=q_data['points']
                    )

                    for choice_data in q_data['choices']:
                        QuestionChoice.objects.create(
                            question=question,
                            choice_text=choice_data['text'],
                            choice_text_arabic=choice_data['text_ar'],
                            is_correct=choice_data['is_correct']
                        )

                self.stdout.write(f"Created exercise: {exercise.title}")

            self.stdout.write(self.style.SUCCESS(
                f"Successfully created {len(exercises_data)} exercises for lesson {lesson.id}"
            ))

        except Lesson.DoesNotExist:
            self.stdout.write(self.style.ERROR("Lesson 1579 not found"))
        except Exception as e:
            self.stdout.write(self.style.ERROR(f"Error: {str(e)}"))
