# lessons/management/commands/create_lesson_1570_air_around_us.py

from django.core.management.base import BaseCommand
from lessons.models import Lesson
from homework.models import Exercise, Question, QuestionChoice
from users.models import User

class Command(BaseCommand):
    help = 'Create exercises for Lesson 1570: Air Around Us'

    def add_arguments(self, parser):
        parser.add_argument(
            '--delete-existing',
            action='store_true',
            help='Delete existing exercises for this lesson before creating new ones',
        )

    def handle(self, *args, **options):
        try:
            lesson = Lesson.objects.get(id=1570)
            self.stdout.write(f"Found lesson: {lesson.title}")

            if options['delete_existing']:
                deleted_count = Exercise.objects.filter(lesson=lesson).delete()[0]
                self.stdout.write(self.style.WARNING(f"Deleted {deleted_count} existing exercises"))

            admin_user = User.objects.filter(is_superuser=True).first()
            if not admin_user:
                self.stdout.write(self.style.ERROR("No admin user found"))
                return

            exercises_data = [{'title': 'Introduction to Air', 'title_ar': 'مقدمة عن الهواء', 'difficulty': 'beginner', 'points': 12, 'questions': [{'text': 'What is the main concept of Introduction to Air?', 'text_ar': 'ما هو المفهوم الأساسي لـ مقدمة عن الهواء؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Introduction to Air', 'text_ar': 'المفهوم الأساسي لـ مقدمة عن الهواء', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Introduction to Air?', 'text_ar': 'أي عبارة صحيحة عن مقدمة عن الهواء؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Introduction to Air?', 'text_ar': 'كيف تطبق مقدمة عن الهواء؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Introduction to Air?', 'text_ar': 'أي خاصية تتعلق بـ مقدمة عن الهواء؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Introduction to Air correct?', 'text_ar': 'هل العبارة عن مقدمة عن الهواء صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Introduction to Air', 'text_ar': 'حل مسألة تتضمن مقدمة عن الهواء', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}, {'title': 'Composition of Air', 'title_ar': 'تركيب الهواء', 'difficulty': 'beginner', 'points': 12, 'questions': [{'text': 'What is the main concept of Composition of Air?', 'text_ar': 'ما هو المفهوم الأساسي لـ تركيب الهواء؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Composition of Air', 'text_ar': 'المفهوم الأساسي لـ تركيب الهواء', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Composition of Air?', 'text_ar': 'أي عبارة صحيحة عن تركيب الهواء؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Composition of Air?', 'text_ar': 'كيف تطبق تركيب الهواء؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Composition of Air?', 'text_ar': 'أي خاصية تتعلق بـ تركيب الهواء؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Composition of Air correct?', 'text_ar': 'هل العبارة عن تركيب الهواء صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Composition of Air', 'text_ar': 'حل مسألة تتضمن تركيب الهواء', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}, {'title': 'Properties of Air', 'title_ar': 'خصائص الهواء', 'difficulty': 'intermediate', 'points': 12, 'questions': [{'text': 'What is the main concept of Properties of Air?', 'text_ar': 'ما هو المفهوم الأساسي لـ خصائص الهواء؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Properties of Air', 'text_ar': 'المفهوم الأساسي لـ خصائص الهواء', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Properties of Air?', 'text_ar': 'أي عبارة صحيحة عن خصائص الهواء؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Properties of Air?', 'text_ar': 'كيف تطبق خصائص الهواء؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Properties of Air?', 'text_ar': 'أي خاصية تتعلق بـ خصائص الهواء؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Properties of Air correct?', 'text_ar': 'هل العبارة عن خصائص الهواء صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Properties of Air', 'text_ar': 'حل مسألة تتضمن خصائص الهواء', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}, {'title': 'Air and Living Organisms', 'title_ar': 'الهواء والكائنات الحية', 'difficulty': 'intermediate', 'points': 12, 'questions': [{'text': 'What is the main concept of Air and Living Organisms?', 'text_ar': 'ما هو المفهوم الأساسي لـ الهواء والكائنات الحية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Air and Living Organisms', 'text_ar': 'المفهوم الأساسي لـ الهواء والكائنات الحية', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Air and Living Organisms?', 'text_ar': 'أي عبارة صحيحة عن الهواء والكائنات الحية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Air and Living Organisms?', 'text_ar': 'كيف تطبق الهواء والكائنات الحية؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Air and Living Organisms?', 'text_ar': 'أي خاصية تتعلق بـ الهواء والكائنات الحية؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Air and Living Organisms correct?', 'text_ar': 'هل العبارة عن الهواء والكائنات الحية صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Air and Living Organisms', 'text_ar': 'حل مسألة تتضمن الهواء والكائنات الحية', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}, {'title': 'Importance of Air', 'title_ar': 'أهمية الهواء', 'difficulty': 'advanced', 'points': 12, 'questions': [{'text': 'What is the main concept of Importance of Air?', 'text_ar': 'ما هو المفهوم الأساسي لـ أهمية الهواء؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Core concept of Importance of Air', 'text_ar': 'المفهوم الأساسي لـ أهمية الهواء', 'is_correct': True}, {'text': 'Alternative option 1', 'text_ar': 'خيار بديل 1', 'is_correct': False}, {'text': 'Alternative option 2', 'text_ar': 'خيار بديل 2', 'is_correct': False}, {'text': 'Alternative option 3', 'text_ar': 'خيار بديل 3', 'is_correct': False}]}, {'text': 'Which statement is true about Importance of Air?', 'text_ar': 'أي عبارة صحيحة عن أهمية الهواء؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct statement', 'text_ar': 'عبارة صحيحة', 'is_correct': True}, {'text': 'Incorrect statement 1', 'text_ar': 'عبارة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect statement 2', 'text_ar': 'عبارة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect statement 3', 'text_ar': 'عبارة خاطئة 3', 'is_correct': False}]}, {'text': 'How do you apply Importance of Air?', 'text_ar': 'كيف تطبق أهمية الهواء؟', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct application method', 'text_ar': 'طريقة التطبيق الصحيحة', 'is_correct': True}, {'text': 'Incorrect method 1', 'text_ar': 'طريقة خاطئة 1', 'is_correct': False}, {'text': 'Incorrect method 2', 'text_ar': 'طريقة خاطئة 2', 'is_correct': False}, {'text': 'Incorrect method 3', 'text_ar': 'طريقة خاطئة 3', 'is_correct': False}]}, {'text': 'Which property relates to Importance of Air?', 'text_ar': 'أي خاصية تتعلق بـ أهمية الهواء؟', 'type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Property 1', 'text_ar': 'خاصية 1', 'is_correct': True}, {'text': 'Property 2', 'text_ar': 'خاصية 2', 'is_correct': True}, {'text': 'Unrelated property 1', 'text_ar': 'خاصية غير متعلقة 1', 'is_correct': False}, {'text': 'Unrelated property 2', 'text_ar': 'خاصية غير متعلقة 2', 'is_correct': False}]}, {'text': 'Is the statement about Importance of Air correct?', 'text_ar': 'هل العبارة عن أهمية الهواء صحيحة؟', 'type': 'true_false', 'points': 2, 'choices': [{'text': 'True', 'text_ar': 'صحيح', 'is_correct': True}, {'text': 'False', 'text_ar': 'خطأ', 'is_correct': False}]}, {'text': 'Solve a problem involving Importance of Air', 'text_ar': 'حل مسألة تتضمن أهمية الهواء', 'type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Correct solution', 'text_ar': 'الحل الصحيح', 'is_correct': True}, {'text': 'Incorrect solution 1', 'text_ar': 'حل خاطئ 1', 'is_correct': False}, {'text': 'Incorrect solution 2', 'text_ar': 'حل خاطئ 2', 'is_correct': False}, {'text': 'Incorrect solution 3', 'text_ar': 'حل خاطئ 3', 'is_correct': False}]}]}]

            for exercise_data in exercises_data:
                exercise = Exercise.objects.create(
                    lesson=lesson,
                    title=exercise_data['title'],
                    title_arabic=exercise_data['title_ar'],
                    difficulty_level=exercise_data['difficulty'],
                    total_points=exercise_data['points'],
                    created_by=admin_user
                )

                for q_data in exercise_data['questions']:
                    question = Question.objects.create(
                        exercise=exercise,
                        question_text=q_data['text'],
                        question_text_arabic=q_data['text_ar'],
                        question_type=q_data['type'],
                        points=q_data['points']
                    )

                    for choice_data in q_data['choices']:
                        QuestionChoice.objects.create(
                            question=question,
                            choice_text=choice_data['text'],
                            choice_text_arabic=choice_data['text_ar'],
                            is_correct=choice_data['is_correct']
                        )

                self.stdout.write(f"Created exercise: {exercise.title}")

            self.stdout.write(self.style.SUCCESS(
                f"Successfully created {len(exercises_data)} exercises for lesson {lesson.id}"
            ))

        except Lesson.DoesNotExist:
            self.stdout.write(self.style.ERROR("Lesson 1570 not found"))
        except Exception as e:
            self.stdout.write(self.style.ERROR(f"Error: {str(e)}"))
