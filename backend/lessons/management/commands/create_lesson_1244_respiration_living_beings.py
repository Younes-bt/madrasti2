"""
Django management command to create exercises for Lesson 1244: Respiration in Living Beings
Generated by: generate_batch25_biology.py
"""

from django.core.management.base import BaseCommand
from lessons.models import Lesson
from homework.models import Exercise, Question, QuestionChoice
from users.models import User


class Command(BaseCommand):
    help = 'Create exercises for Lesson 1244: Respiration in Living Beings'

    def handle(self, *args, **options):
        try:
            lesson = Lesson.objects.get(id=1244)
        except Lesson.DoesNotExist:
            self.stdout.write(self.style.ERROR(f'Lesson 1244 not found'))
            return

        admin_user = User.objects.filter(is_superuser=True).first()
        if not admin_user:
            self.stdout.write(self.style.ERROR('No admin user found'))
            return

        exercises_data = [{'title': 'What is Respiration?', 'title_ar': 'ما هو التنفس؟', 'difficulty': 'beginner', 'points': 12, 'questions': [{'text': 'What is Respiration? - Question 1', 'text_ar': 'ما هو التنفس؟ - السؤال 1', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'What is Respiration? - Question 2', 'text_ar': 'ما هو التنفس؟ - السؤال 2', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'What is Respiration? - Question 3', 'text_ar': 'ما هو التنفس؟ - السؤال 3', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'What is Respiration? - Question 4', 'text_ar': 'ما هو التنفس؟ - السؤال 4', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'What is Respiration? - Question 5', 'text_ar': 'ما هو التنفس؟ - السؤال 5', 'question_type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'What is Respiration? - Question 6', 'text_ar': 'ما هو التنفس؟ - السؤال 6', 'question_type': 'true_false', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}]}, {'title': 'Aerobic Respiration', 'title_ar': 'التنفس الهوائي', 'difficulty': 'beginner', 'points': 12, 'questions': [{'text': 'Aerobic Respiration - Question 1', 'text_ar': 'التنفس الهوائي - السؤال 1', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Aerobic Respiration - Question 2', 'text_ar': 'التنفس الهوائي - السؤال 2', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Aerobic Respiration - Question 3', 'text_ar': 'التنفس الهوائي - السؤال 3', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Aerobic Respiration - Question 4', 'text_ar': 'التنفس الهوائي - السؤال 4', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Aerobic Respiration - Question 5', 'text_ar': 'التنفس الهوائي - السؤال 5', 'question_type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Aerobic Respiration - Question 6', 'text_ar': 'التنفس الهوائي - السؤال 6', 'question_type': 'true_false', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}]}, {'title': 'Respiration in Animals', 'title_ar': 'التنفس عند الحيوانات', 'difficulty': 'intermediate', 'points': 12, 'questions': [{'text': 'Respiration in Animals - Question 1', 'text_ar': 'التنفس عند الحيوانات - السؤال 1', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Respiration in Animals - Question 2', 'text_ar': 'التنفس عند الحيوانات - السؤال 2', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Respiration in Animals - Question 3', 'text_ar': 'التنفس عند الحيوانات - السؤال 3', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Respiration in Animals - Question 4', 'text_ar': 'التنفس عند الحيوانات - السؤال 4', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Respiration in Animals - Question 5', 'text_ar': 'التنفس عند الحيوانات - السؤال 5', 'question_type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Respiration in Animals - Question 6', 'text_ar': 'التنفس عند الحيوانات - السؤال 6', 'question_type': 'true_false', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}]}, {'title': 'Respiration in Plants', 'title_ar': 'التنفس عند النباتات', 'difficulty': 'intermediate', 'points': 12, 'questions': [{'text': 'Respiration in Plants - Question 1', 'text_ar': 'التنفس عند النباتات - السؤال 1', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Respiration in Plants - Question 2', 'text_ar': 'التنفس عند النباتات - السؤال 2', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Respiration in Plants - Question 3', 'text_ar': 'التنفس عند النباتات - السؤال 3', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Respiration in Plants - Question 4', 'text_ar': 'التنفس عند النباتات - السؤال 4', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Respiration in Plants - Question 5', 'text_ar': 'التنفس عند النباتات - السؤال 5', 'question_type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Respiration in Plants - Question 6', 'text_ar': 'التنفس عند النباتات - السؤال 6', 'question_type': 'true_false', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}]}, {'title': 'Gas Exchange', 'title_ar': 'تبادل الغازات', 'difficulty': 'advanced', 'points': 12, 'questions': [{'text': 'Gas Exchange - Question 1', 'text_ar': 'تبادل الغازات - السؤال 1', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Gas Exchange - Question 2', 'text_ar': 'تبادل الغازات - السؤال 2', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Gas Exchange - Question 3', 'text_ar': 'تبادل الغازات - السؤال 3', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Gas Exchange - Question 4', 'text_ar': 'تبادل الغازات - السؤال 4', 'question_type': 'qcm_single', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Gas Exchange - Question 5', 'text_ar': 'تبادل الغازات - السؤال 5', 'question_type': 'qcm_multiple', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}, {'text': 'Gas Exchange - Question 6', 'text_ar': 'تبادل الغازات - السؤال 6', 'question_type': 'true_false', 'points': 2, 'choices': [{'text': 'Option A', 'text_ar': 'الخيار أ', 'is_correct': True}, {'text': 'Option B', 'text_ar': 'الخيار ب', 'is_correct': False}, {'text': 'Option C', 'text_ar': 'الخيار ج', 'is_correct': False}, {'text': 'Option D', 'text_ar': 'الخيار د', 'is_correct': False}]}]}]

        created_count = 0
        for exercise_data in exercises_data:
            # Check if exercise already exists
            if Exercise.objects.filter(
                lesson=lesson,
                title=exercise_data['title']
            ).exists():
                self.stdout.write(
                    self.style.WARNING(
                        f'Exercise "{exercise_data["title"]}" already exists, skipping...'
                    )
                )
                continue

            # Create exercise
            exercise = Exercise.objects.create(
                lesson=lesson,
                title=exercise_data['title'],
                title_arabic=exercise_data['title_ar'],
                difficulty_level=exercise_data['difficulty'],
                total_points=exercise_data['points'],
                created_by=admin_user
            )

            # Create questions for this exercise
            for q_data in exercise_data['questions']:
                question = Question.objects.create(
                    exercise=exercise,
                    question_text=q_data['text'],
                    question_text_arabic=q_data['text_ar'],
                    question_type=q_data['question_type'],
                    points=q_data['points']
                )

                # Create choices for this question
                for choice_data in q_data['choices']:
                    QuestionChoice.objects.create(
                        question=question,
                        choice_text=choice_data['text'],
                        choice_text_arabic=choice_data['text_ar'],
                        is_correct=choice_data['is_correct']
                    )

            created_count += 1
            self.stdout.write(
                self.style.SUCCESS(
                    f'Created exercise: {exercise.title} with {len(exercise_data["questions"])} questions'
                )
            )

        self.stdout.write(
            self.style.SUCCESS(
                f'Successfully created {created_count} exercises for lesson: Respiration in Living Beings'
            )
        )
